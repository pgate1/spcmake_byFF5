
# spcmake_byFF5 MMLコマンド一覧

## コメントアウト

//以降改行までコメントアウト
D2 B0 // 音量
/*から*/までコメントアウト
/*C3 C3 C3*/ C8

以下トラック記述前に定義するもの

## #songname "kyokumei"

曲名を設定します。

## #gametitle "ge-mumei"

ゲーム曲であれば設定します。

## #artist "Yamada Taro"

作曲者を設定します。

#dumper "pgate1"

あなたの名前、MMLの作成者を設定します。

## #comment "nanikakaku"

SPCプレイヤで表示されるコメントを設定します。

## #length play_time fade_out_time

曲の再生時間とフェードアウト時間(ms)を設定します。
デフォルトでは再生時間(playtime)300秒、フェードアウト時間(fadeouttime)10000msとなっています。
SPCプレイヤによって対応していたり対応していなかったり。

    #length 2:30 4000 // 再生時間2分30秒、フェードアウト時間4秒
    #length 150 10000 // 再生時間150秒、フェードアウト時間10秒

#brr_offset offset

BRRデータのAPUメモリ内配置位置を指定するオプションです。
デフォルトはoffset:0x4800です。

    #brr_offset 0x3000 // BRRデータを0x3000から配置します
    #brr_offset auto // BRRデータをシーケンスデータの直後に配置します

#brr_echo_overcheck

このオプション設定を記述すると、BRRデータ領域がエコーバッファ領域と重なっていないかチェックし、重なっている場合はエラーとします。
エコーバッファ領域はデフォルトで0xD200～0xF9FFとなっています。

#surround

逆位相サラウンドを有効にするオプション設定です。
MVOL_Rに0x80を設定します。

#tone (音色定義)

音色を設定します。
基本的に音色を使用するトラック宣言の前に定義します。

#tone tone_num "brr_file_name" octave transpose detune attack_rate decay_rate sustain_level sustain_rate

#tone 1 "brr/harp.brr" 5 2 0 15 7 7 11 // 自分で用意したBRRファイルを使用する場合
#tone 2 "FF5inst:1" 5 0 0 // FF5内蔵波形を使用します
#tone 3 "FF5inst:5"
#tone 4 "FF5inst:s0" 5 0 0
#tone 5 "FF5inst:s3"

FF5内蔵波形はFF5inst:0～34まで指定できます。
FF5常駐波形はFF5inst:s0～s7まで指定できます。
FF5instを指定する場合はオクターブ・トランスポーズ・ディチューン設定を省略することができます。この場合、生成されるSPCにはそれぞれのコマンドは埋め込まれません。

#track track_num

トラックを設定します。
スーファミ音源は8チャンネルなので、track_numは1～8で設定できます。
これ以降、次の#trackまでがそのトラックのシーケンスとなります。

@n

#toneで定義した音色を選択します。

d

10進数を記述します。

d93 // 5Dに変換されます
d-15 // F1に変換されます

L

トラックループです。
これ以降のシーケンスがトラック終了からループします。
シーケンスでは最後に制御コマンドFAが追加されます。

[...]n

ループです。
[]内をn回繰り返します。
多重ループも可能です。
シーケンスでは[がF0に、]がF1に置き換えられます。

[ 26 8F ]2 // 26 8F 26 8F

[ [ 26 8F ]2 44 08 ]2 // 26 8F 26 8F 44 08 26 8F 26 8F 44 08 

| (パイプ)

ループブレイクポイントで、ループの最後にループを抜けます。
シーケンスでは|がF9に置き換えられます。
FF5サウンドドライバの制限により、多重ループの中では使用できません。

[ 26 | 8F ]3 08 // 26 8F 26 8F 26 08

!

この記号以降のMMLコンパイルをストップします。

